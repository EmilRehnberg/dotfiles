#!/usr/bin/env ruby
# Requires: mplayer, ttf-kochi-mincho package
# The later should be installed with the new-install script.

# script for running mplayer with japanese utf8 subs
class Jmplayer
  EXECUTABLE = "mplayer"
  ENCODING = '-utf8'

  def self.run
    %x(#{EXECUTABLE} #{ENCODING} #{font_argument} "#{ARGV[0]}")
  end

  private

  def self.font_argument
    "-font '#{font_name}'"
  end

  def self.font_name
    case ENV["_system_name"]
    when "Ubuntu"
      "Kochi Mincho"
    when "OSX"
      "Yu Mincho"
    else
      abort("Could not find environment variable and hence do not know what font to use")
    end
  end
end

if __FILE__ == $0
  Jmplayer.run
end
