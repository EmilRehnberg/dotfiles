#!/usr/bin/env R
if (interactive()) {
  library(magrittr)
  library(usethis)
  library(devtools)
  library(setwidth)

  # saves R history
  # requires `R_HISTFILE` env variable
  # `.Last` function is invoked in `q`/`quit` if `runLast` is `TRUE`
  # from `?savehistory` and http://stackoverflow.com/questions/1189759/expert-r-users-whats-in-your-rprofile
  if (!any(commandArgs() == "--no-readline")){
    .rprofile_env <- new.env(parent = emptyenv())
    .Last <- function() Sys.getenv("R_HISTFILE") %>% utils::savehistory() %>% try()
    attach(.rprofile_env)
  }

}

options(
  noaakey = "kbyeWbbWABLOUfXXvuShDSUcyMeuyCrW",
  max.print = 100,
  useFancyQuotes = FALSE, # fancy quotes are annoying
  usethis.full_name = "Emil Rehnberg",
  usethis.description = list(
    `Authors@R` = 'person("Emil", "Rehnberg",
    email = "emil.rehnberg@gmail.com",
    role = c("aut", "cre"),
    comment = c(ORCID = "YOUR-ORCID-ID"))',
    License = "MIT + file LICENSE",
    Version = "0.0.0.9000"
  ),
  usethis.protocol  = "ssh",
  warnPartialMatchAttr = TRUE, # Warn on `attr()` function partial matching.
  warnPartialMatchDollar = TRUE,
  warnPartialMatchArgs = TRUE
)
utils::rc.settings(ipck = TRUE) # enables autocompletions for `library()` etc

dir_specific_rprofile_dir_path <- "~/.config/R"
if (dir.exists(dir_specific_rprofile_dir_path))
  R.utils::sourceDirectory(dir_specific_rprofile_dir_path)
